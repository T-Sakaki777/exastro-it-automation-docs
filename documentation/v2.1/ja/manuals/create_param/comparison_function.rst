========
比較機能
========

比較機能概要
============

| 本章では比較機能について説明します。

比較機能について
^^^^^^^^^^^^^^^^

| 比較機能とは、ITAのメニュー作成機能で作成したパラメータシートを比較し、差分を出力する機能です。
|
| 本機能は、「パラメータシート（ホスト/オペレーションあり）」を対象としています。
| パラメータシートの詳細については、「利用手順マニュアル メニュー作成機能」を参照してください。
| アクセス権/アクセス許可ロールについては、「利用手順マニュアル データレコード毎の
| ロールベースアクセス制御」を参照してください。

比較機能全体概要図
******************

| 以下は、比較機能実行までの全体の概要図です。

  .. figure:: /images/ja/diagram/比較機能全体概要図.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: 比較機能全体概要図


比較機能処理概要図
******************

| 以下は、比較機能の処理の概要図です。

  .. figure:: /images/ja/diagram/比較機能処理概要図.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: 比較機能処理概要図

比較機能定義概要図
******************

| 以下は、パラメータシートの紐付と比較結果の概要図です。
| 比較定義、比較定義詳細、各設定については、「5 比較機能・操作方法説明」を参照してください。
|
| ・パラメータシートの紐付（比較対象のパラメータシートの項目名が完全に一致している場合）

  .. figure:: /images/ja/diagram/比較定義概要図1.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: 比較対象のパラメータシートの項目名が完全に一致している場合

| 
| ・パラメータシートの紐付（比較対象のパラメータシートの項目が不一致の場合）

  .. figure:: /images/ja/diagram/比較定義概要図2.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: 比較対象のパラメータシートの項目が不一致の場合

| 
| 
| 

パラメータシートの比較について
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

| 比較機能は、比較定義、比較定義詳細にて、紐付された対象パラメータシート、項目情報を元に比較を実施します。
| 

比較機能の動作要件
******************

| ITAで以下の設定がされていること。
| ・ITA インストーラにて、「createparam」が選択され、インストールされている
| ・ メニュー定義/作成にて、作成対象「パラメータシート（ホスト/オペレーションあり）」が作成されている
| ・比較定義にて、比較対象となるパラメータシート同士の紐づけ設定がされている。
| ・比較定義詳細にて、比較対象となるの項目同士で紐づけ設定がされている。（比較定義の設定状態によっては、設定不要）

比較実行パラメータ
******************

| 以下をパラメータとして設定し比較を実行できます。
| 比較定義については、後述の「比較定義」を参照。

.. list-table::  表 比較実行パラメータ
   :widths: 15 25 7 10 10
   :header-rows: 1
   :align: left

   * - | パラメータ
     - | 説明
     - | 入力必須
     - | 入力形式
     - | 制約事項
   * - | 比較定義
     - | 比較定義名を選択
     - | ○
     - | リスト選択
     - | 
   * - | 基準日１
     - | 比較定義にて比較対象メニュー1 で選択したメニューの
       | 基準日となる日時を入力
     - | 
     - | 手動入力
     - | 
   * - | 基準日２
     - | 比較定義にて比較対象メニュー2 で選択したメニューの
       | 基準日となる日時を入力
     - | 
     - | 手動入力
     - |
   * - | 対象ホスト
     - | 対象ホストを選択
       | デフォルト：対象の絞り込みなし。（比較対象を全件表示） 
     - |
     - | リスト選択
     - | 


比較機能での対象項目について
============================

比較対象項目
^^^^^^^^^^^^

比較対象のパラメータシートの項目
********************************

| 比較機能で使用可能なパラメータシートの項目について以下となります。

.. list-table:: 表 パラメータシートの比較対象項目
   :widths: 15 25
   :header-rows: 1
   :align: left

   * - | 項目種別
     - | 制約事項
   * - | 文字列\(単一行\)
     - | 
   * - | 文字列\(複数行\)
     - | 
   * - | 整数
     - | 
   * - | 小数
     - | 
   * - | プルダウン選択
     - | 選択したリストの ID での比較を行います。
       | アクセス権がない場合、 ID 返還失敗\(X\)表記となります。
   * - | ファイルアップロード
     - | ファイルアップロード同士で比較する場合、ファイル名、ファイルの内容で比較を
       | 実施します。
   * - | リンク
     - | 

| ※アクセス権については、「利用手順マニュアル データレコード毎のロールベースアクセス制御」を参照してください。
|

比較可能な対象項目の組み合わせ
******************************

| 比較可能なパラメータシートの項目の組み合わせ一覧になります。

.. list-table:: 表 比較対象項目の比較パターン組み合わせ
   :widths: 13 10 10 10 10 10 10 10
   :header-rows: 1
   :stub-columns: 1
   :align: left

   * - | 
     - | 文字列
       | \(単一行\)
     - | 文字列
       | \(複数行\)
     - | 整数
     - | 小数
     - | プルダウン
       | 選択
     - | ファイル
       | アップロード
     - | リンク
   * - | 文字列
       | \(単一行\) 
     - | ○
     - | ○
     - | ○
     - | ○
     - | ○※１
     - | ○※２
     - | ○
   * - | 文字列
       | \(複数行\)
     - | ○
     - | ○
     - | ○
     - | ○
     - | ○※１
     - | ○※２
     - | ○
   * - | 整数
     - | ○
     - | ○
     - | ○
     - | ○
     - | ○※１
     - | ○※２
     - | ○
   * - | 小数
     - | ○
     - | ○
     - | ○
     - | ○
     - | ○※１
     - | ○※２
     - | ○
   * - | プルダウン
       | 選択
     - | ○※１
     - | ○※１
     - | ○※１
     - | ○※１
     - | ○※１
     - | ○※１※２
     - | ○※１
   * - | ファイル
       | アップロード
     - | ○※２
     - | ○※２
     - | ○※２
     - | ○※２
     - | ○※１※２
     - | ○※３
     - | ○※２
   * - | リンク
     - | ○
     - | ○
     - | ○
     - | ○
     - | ○※１
     - | ○※２
     - | ○

比較のメニュー構成
==================

| 本章では、比較メニュー構成について説明します。

メニュー/画面一覧
^^^^^^^^^^^^^^^^^

| 比較のメニュー一覧をいかに記述します。

.. list-table:: 表 比較画面一覧
   :widths: 3 10 10 24
   :header-rows: 1
   :stub-columns: 1
   :align: left

   * - | No
     - | メニューグループ
     - | メニュー・画面
     - | 説明
   * - |  1
     - | 比較
     - | 比較定義
     - | 比較実行する定義名の作成を行います。
       | 比較対象のパラメータシートの紐付を行います。
   * - |  2
     - | 比較
     - | 比較定義詳細
     - | 比較するパラメータシートの項目について、
       | パラメータシートの項目単位での紐付設定を行います。
   * - |  3
     - | 比較
     - | 比較実行
     - | 比較定義・比較定義詳細で設定した、
       | 設定を元に比較を実施
       

比較機能の利用手順
==================

| 比較機能の利用手順について説明します。

作業フロー  
^^^^^^^^^^

| 比較機能の実施における標準的なフローは以下の通りです。

比較機能実行フロー
******************

| 以下は、パラメータシートの比較を実行するまでの流れです。

# ここにdrowioかSSを貼る予定

- 作業フロー詳細と参照先
  
  #. | パラメータシートの作成
     | \[メニュー作成\] - \[メニュー定義/作成\] 画面からのパラメータシートを作成します。
     | 詳細は「利用手順マニュアル_メニュー作成機能」を参照してください。
  #. | パラメータシートへのデータ登録
     | 「1. パラメータシートの作成」にて作成したパラメータシートへデータを登録します。
     | 詳細は「利用手順マニュアル_メニュー作成機能」を参照してください。
  #. | 比較定義の作成
     | \[比較\] - \[比較定義詳細\] 画面から、比較定義詳細の設定を行います。
     | 詳細は「比較定義詳細」を参照してください。
  #. | 比較定義詳細の設定
     | \[比較\] - \[比較定義詳細\] 画面から、比較定義詳細の設定を行います。
     | 詳細は「比較定義詳細」を参照してください。
  #. | 比較実行
     | \[比較\] - \[比較実行\] 画面から、パラメータシートの比較を行います。
     | 詳細は「比較実行」を参照してください。
|

比較機能・操作方法説明
======================

| 本章では、比較機能で利用する各メニューについて説明します。

比較
^^^^

比較定義
********

| \[比較定義\] では、比較実行時に使用する定義情報（対象のパラメータシートの紐付）の登録、更新を行います。

 .. figure:: /images/ja/comparison_function/comparison_definition/比較定義サブメニュー画面.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: サブメニュー画面（比較定義）

| 「一覧」-「更新/一覧」-「登録開始」ボタンより、比較定義の登録を行います。
 .. figure:: /images/ja/comparison_function/comparison_definition/比較定義登録画面.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: サブメニュー画面（比較定義）

| 比較定義画面の項目一覧は以下の通りです。     

.. list-table:: 表 比較実行の項目一覧
   :widths: 10 25 5 5 10
   :header-rows: 1
   :align: left

   * - | 項目
     - | 説明
     - | 入力必須
     - | 入力形式
     - | 制約事項
   * - | 比較定義名
     - | 比較定義名を入力します。
     - | ○
     - | 手動入力
     - |
   * - | 比較対象メニュー１
     - | 対象のメニューを選択します。
     - | ○
     - | リスト選択
     - |
   * - | 比較対象メニュー２
     - | 対象のメニューを選択します。
     - | ○
     - | リスト選択
     - |
   * - | 全件一致
     - | 比較対象メニュー１、比較対象メニュー２の項目名が
       | 完全に一致している場合に選択します。
     - | -
     - | 選択
     - | ※１
   * - | 備考
     - | 自由記述欄です。
     - | -
     - | 手動入力
     - |

| ※１ 全件一致を選択する場合、比較定義詳細の設定が不要になります。
| 選択したパラメータシート同士の項目名が完全に一致している必要があります。


比較定義詳細
************

| \[比較定義詳細\]では、比較対象の項目名とパラメータシートの項目同士の紐付設定を行います。

 .. figure:: /images/ja/comparison_function/comparison_definition_details/比較定義詳細サブメニュー画面.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: サブメニュー画面\(比較定義詳細\)

| 「一覧」-「登録開始」ボタンより、比較項目の登録を行います。

 .. figure:: /images/ja/comparison_function/comparison_definition_details/比較定義詳細登録画面.png
     :width: 6.67391in
     :height: 3.20028in
     :align: left
     :alt: 登録画面\(比較定義詳細\)

